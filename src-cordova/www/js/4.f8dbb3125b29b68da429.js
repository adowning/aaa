webpackJsonp([4],{"ZVG+":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.q-card[data-v-46ea2d3e] {\n  width: 100%;\n}\n.q-tab-pane[data-v-46ea2d3e] {\n  background-color: #4c566a !important\n}\n.google-map[data-v-46ea2d3e] {\n  width: 100%;\n  height: 800px;\n  margin: 0 auto;\n  /* background: gray; */\n}\n",""])},eNMo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"google-map",props:["name"],data:function(){return{mapName:this.name+"-map",markerCoordinates:[{latitude:32.3112106941694,longitude:-95.2633916507901},{latitude:32.3073276190509,longitude:-95.2648030425142}],map:null,bounds:null,markers:[],client:{},tabletList:[]}},methods:{refreshMarkers:function(t){var e={};try{e=JSON.parse(t)}catch(t){return}if("location"==e._type){e.tst||(e.tst=new Date);var a=_.find(this.tabletList,{tid:e.tid});if(a){console.log(a);var i=new google.maps.LatLng(e.lat,e.lon);a.position=i}else{console.log("new");i=new google.maps.LatLng(e.lat,e.lon);var s=new google.maps.Marker({position:i,map:this.map,tid:e.tid,title:e.tid});this.tabletList.push(s)}}},getMarkersFromDatabase:function(){var t=this;this.markerCoordinates.forEach(function(e){var a=new google.maps.LatLng(e.latitude,e.longitude),i=new google.maps.Marker({position:a,map:t.map});t.markers.push(i),t.markers.push(i)})},startMQTTClient:function(){var t=this;this.client.on("message",function(e,a){t.refreshMarkers(a)})}},mounted:function(){var t=this;this.bounds=new google.maps.LatLngBounds;var e=document.getElementById(this.mapName),a=this.markerCoordinates[0],i={center:new google.maps.LatLng(a.latitude,a.longitude)};this.map=new google.maps.Map(e,i),this.markerCoordinates.forEach(function(e){var a=new google.maps.LatLng(e.latitude,e.longitude),i=new google.maps.Marker({position:a,map:t.map});t.markers.push(i),t.map.fitBounds(t.bounds.extend(a))}),_client.on("connect",function(){_client.subscribe("presence"),_client.subscribe("owntracks"),_client.subscribe("owntracks/#"),_client.subscribe("owntracks/+/+"),_client.publish("presence","Hello mqtt")}),this.client=_client,this.startMQTTClient(this.map)}},s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row q-pa-lg"},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"google-map",attrs:{id:t.mapName}})]),t._v(" "),a("div",{staticClass:"col-4 q-pl-sm"},[a("q-tabs",{attrs:{color:"secondary",align:"justify"}},[a("q-tab",{attrs:{slot:"title",name:"movies",icon:"history",label:"Jobs"},slot:"title"}),t._v(" "),a("q-tab",{attrs:{slot:"title",default:"",name:"tablets",icon:"android",label:"Tablet List"},slot:"title"}),t._v(" "),a("q-tab",{attrs:{slot:"title",name:"vehicles",icon:"local shipping",label:"Vehicle List"},slot:"title"}),t._v(" "),a("q-tab-pane",{attrs:{name:"tablets"}},[a("q-list",t._l(t.tabletList,function(e){return a("q-item",{key:e.tid,staticClass:"q-caption on-left",attrs:{data:e}},[a("q-item-side",{attrs:{right:"",icon:"local shipping"}}),t._v(" "),a("q-item-main",{attrs:{label:e.tid}}),t._v(t._s(e.position))],1)}))],1),t._v(" "),a("q-tab-pane",{attrs:{name:"vehicles"}},t._l(t.tabletList,function(e){return a("q-list",{key:e.tid,attrs:{data:e}},[a("q-item",{staticClass:"q-caption on-left"},[a("q-item-side",{attrs:{right:"",icon:"local shipping"}}),t._v(" "),a("q-item-main",{attrs:{label:e.tid}}),t._v(t._s(e.position))],1)],1)})),t._v(" "),a("q-tab-pane",{attrs:{name:"jobs"}},[t._v("History")])],1)],1)])},n=[];s._withStripped=!0;var o=a("XyMi"),l=!1;var r=function(t){l||a("qwmR")},c=Object(o.a)(i,s,n,!1,r,"data-v-46ea2d3e",null);c.options.__file="src/components/LiveView.vue";e.default=c.exports},qwmR:function(t,e,a){var i=a("ZVG+");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a("rjj0").default)("5f10e966",i,!1,{})}});